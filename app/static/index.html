<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Promtior RAG — Chat Assistant</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Fraunces:wght@600;700&family=Space+Grotesk:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0b0f1e;
      --panel:#0f1626;
      --panel-2:#111c2e;
      --ink:#e6edf5;
      --muted:#9ba7b8;
      --accent:#6ea8fe;
      --accent-2:#6ef2c2;
      --bubble-user:#2b78ff;
      --bubble-bot:#15233a;
      --ring:rgba(255,255,255,0.08);
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      color:var(--ink);
      font-family:"Space Grotesk",system-ui,-apple-system,Segoe UI,sans-serif;
      background:
        radial-gradient(900px 500px at 10% -10%, rgba(255,122,89,0.18), transparent 60%),
        radial-gradient(800px 480px at 100% 0%, rgba(247,201,72,0.2), transparent 55%),
        linear-gradient(180deg,#0a0f1b 0%, #0b1426 60%, #0a0f1b 100%);
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:32px 16px;
    }
    .frame{
      width:100%;
      max-width:900px;
      background:linear-gradient(180deg,rgba(15,22,38,0.92),rgba(9,14,26,0.96));
      border:1px solid var(--ring);
      border-radius:20px;
      box-shadow:0 30px 80px rgba(0,0,0,0.45);
      overflow:hidden;
      animation:pop 600ms ease;
    }
    header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:16px;
      padding:22px 24px;
      background:
        linear-gradient(90deg,rgba(247,201,72,0.12),transparent 60%),
        linear-gradient(180deg,#0f172b,#0e1423);
      border-bottom:1px solid var(--ring);
    }
    .brand{
      display:flex;
      align-items:center;
      gap:14px;
    }
    .logo{
      width:44px;height:44px;border-radius:12px;
      background:radial-gradient(circle at 30% 30%,#ffffff, #aab6c6 40%, #2b3850 70%);
      box-shadow:0 10px 26px rgba(30,40,70,0.35);
    }
    h1{
      margin:0;
      font-family:"Fraunces",serif;
      font-size:22px;
      letter-spacing:0.3px;
    }
    .subtitle{
      margin:4px 0 0;
      color:var(--muted);
      font-size:13px;
    }
    .pill{
      padding:6px 10px;
      border:1px solid var(--ring);
      border-radius:999px;
      font-size:12px;
      color:var(--muted);
      background:rgba(14,20,35,0.7);
    }
    .content{padding:20px 22px 24px}
    .panel{
      background:linear-gradient(180deg,#0f1629,#0b1324);
      border:1px solid var(--ring);
      border-radius:16px;
      padding:16px;
    }
    .chat{
      height:52vh;
      overflow:auto;
      padding:10px;
      border-radius:12px;
      background:var(--panel-2);
      border:1px solid rgba(255,255,255,0.04);
    }
    .msg{margin:10px 0;display:flex}
    .msg.user{justify-content:flex-end}
    .bubble{
      max-width:78%;
      padding:10px 12px;
      border-radius:12px;
      font-size:14px;
      line-height:1.4;
      animation:floatIn 220ms ease-out;
      white-space:pre-wrap;
    }
    .bubble.user{
      background:linear-gradient(120deg,#2b78ff,#6ea8fe);
      color:#f7fbff;
      box-shadow:0 6px 18px rgba(110,168,254,0.25);
    }
    .bubble.bot{
      background:linear-gradient(180deg,#15243b,#111d33);
      border:1px solid rgba(255,255,255,0.06);
    }
    .input-row{
      display:flex;
      gap:10px;
      margin-top:12px;
    }
    input[type="text"]{
      flex:1;
      padding:12px 14px;
      border-radius:12px;
      border:1px solid var(--ring);
      background:rgba(7,12,22,0.6);
      color:var(--ink);
      font-size:14px;
      outline:none;
      transition:border-color 160ms ease, box-shadow 160ms ease;
    }
    input[type="text"]:focus{
      border-color:rgba(110,168,254,0.75);
      box-shadow:0 0 0 3px rgba(110,168,254,0.18);
    }
    button{
      padding:12px 16px;
      border-radius:12px;
      border:0;
      background:linear-gradient(120deg,#2b78ff,#6ea8fe);
      color:#f7fbff;
      font-weight:700;
      cursor:pointer;
      transition:transform 120ms ease, box-shadow 160ms ease;
      box-shadow:0 12px 22px rgba(43,120,255,0.2);
    }
    button:hover{transform:translateY(-1px)}
    button:active{transform:translateY(0)}
    .sources{
      margin-top:10px;
      color:var(--muted);
      font-size:12px;
      line-height:1.4;
    }
    .quick-starts{
      margin-top:12px;
      display:flex;
      flex-wrap:wrap;
      gap:8px;
    }
    .chip{
      border:1px solid var(--ring);
      background:rgba(13,20,36,0.75);
      color:var(--muted);
      padding:8px 10px;
      border-radius:999px;
      font-size:12px;
      cursor:pointer;
      transition:all 140ms ease;
    }
    .chip:hover{
      border-color:rgba(110,168,254,0.6);
      color:#dfe8f6;
      transform:translateY(-1px);
    }
    .footer{
      padding:10px 22px 20px;
      color:var(--muted);
      font-size:12px;
      display:flex;
      justify-content:space-between;
      gap:12px;
    }
    @keyframes pop{from{transform:translateY(8px);opacity:0}to{transform:translateY(0);opacity:1}}
    @keyframes floatIn{from{transform:translateY(6px);opacity:0}to{transform:translateY(0);opacity:1}}
    @media (max-width:900px){
      .chat{height:50vh}
    }
  </style>
</head>
<body>
  <div class="frame">
    <header>
      <div class="brand">
        <div class="logo" aria-hidden="true"></div>
        <div>
          <h1>Promtior RAG</h1>
          <div class="subtitle">Context-first assistant for company knowledge</div>
        </div>
      </div>
      <div class="pill">Trusted Sources</div>
    </header>

    <div class="content">
      <section class="panel">
        <div id="chat" class="chat"></div>
        <div class="input-row">
          <input id="q" type="text" placeholder="Ask about services, timelines, or deliverables..." />
          <button id="send">Ask</button>
        </div>
        <div class="quick-starts" aria-label="Quick start prompts">
          <button class="chip" type="button">What services does Promtior offer?</button>
          <button class="chip" type="button">When was the company founded?</button>
          <button class="chip" type="button">What industries does Promtior specialize in?</button>
        </div>
        <div id="sources" class="sources"></div>
      </section>
    </div>

    <div class="footer">
      <div>Tip: Ask a narrow question for higher precision.</div>
      <div>Powered by Promtior RAG</div>
    </div>
  </div>
<script>
const chat = document.getElementById('chat');
const q = document.getElementById('q');
const send = document.getElementById('send');
const sourcesDiv = document.getElementById('sources');
const quickStarts = document.querySelectorAll('.chip');

function append(who, text) {
  const d = document.createElement('div');
  d.className = who === 'user' ? 'msg user' : 'msg';
  const b = document.createElement('div');
  b.className = who === 'user' ? 'bubble user' : 'bubble bot';
  b.innerText = text;
  d.appendChild(b);
  chat.appendChild(d);
  chat.scrollTop = chat.scrollHeight;
}

send.onclick = async () => {
  const question = q.value.trim();
  if (!question) return;
  append('user', question);
  q.value = '';
  append('bot', 'Generating answer...');
  try {
    const res = await fetch('/promtior/ask', {
      method: 'POST',
      headers: {'Content-Type':'application/json'},
      body: JSON.stringify({question})
    });
    const body = await res.json();
    // remove last bot placeholder
    chat.removeChild(chat.lastChild);
    append('bot', body.answer || 'No answer.');
    sourcesDiv.innerHTML = '';
    if (body.sources && body.sources.length) {
      sourcesDiv.innerHTML = '<strong>Sources:</strong> ' + body.sources.join(' • ');
    } else {
      sourcesDiv.innerHTML = '<strong>Sources:</strong> none';
    }
  } catch (e) {
    chat.removeChild(chat.lastChild);
    append('bot', 'Error: ' + e.message);
  }
};

q.addEventListener('keydown', (e) => { if (e.key === 'Enter') send.click(); });
quickStarts.forEach((chip) => {
  chip.addEventListener('click', () => {
    q.value = chip.innerText;
    q.focus();
    send.click();
  });
});

append('bot', "Hello — I'm Promtior's RAG assistant. Ask me about services or company history.");
</script>
</body>
</html>
